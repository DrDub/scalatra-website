<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Scalatra | The anatomy of a Scalatra app</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">

<!-- Le styles -->
<link href="/scalatra-website/_site/assets/css/bootstrap.css" rel="stylesheet">
<link href="/scalatra-website/_site/assets/css/scalatra.css" rel="stylesheet">
<style>
  body {
    padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
  }
</style>
<link href="/scalatra-website/_site/assets/css/bootstrap-responsive.css" rel="stylesheet">

<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!-- Le fav and touch icons -->
<link rel="shortcut icon" href="/scalatra-website/_site/assets/ico/favicon.ico">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/scalatra-website/_site/assets/ico/apple-touch-icon-144-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/scalatra-website/_site/assets/ico/apple-touch-icon-114-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/scalatra-website/_site/assets/ico/apple-touch-icon-72-precomposed.png">
<link rel="apple-touch-icon-precomposed" href="/scalatra-website/_site/assets/ico/apple-touch-icon-57-precomposed.png">
  </head>

      <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/scalatra-website/_site/">Scalatra</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li><a href="/scalatra-website/_site/getting-started">Getting started</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Guides
                <b class="caret"></b>
                </a>
                <ul class="dropdown-menu">
                  <li><a href="/scalatra-website/_site/guides">Overview</a></li>
                  <li><a href="/scalatra-website/_site/guides/routes-and-actions.html">Routes &amp; Actions</a></li>
                  <li><a href="/scalatra-website/_site/guides/views.html">Views</a></li>
                  <li><a href="/scalatra-website/_site/guides/helpers.html">Helpers</a></li>
                  <li><a href="/scalatra-website/_site/guides/models.html">Models</a></li>
                  <li><a href="/scalatra-website/_site/guides/testing.html">Testing</a></li>
                  <li><a href="/scalatra-website/_site/guides/configuration-deployment.html">Configuration &amp; Deployment</a></li>
                </ul>
              </li>
              <li><a href="/scalatra-website/_site/news">News</a></li>
              <li><a href="/scalatra-website/_site/community">Community</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                API docs
                <b class="caret"></b>
                </a>
                <ul class="dropdown-menu">
              <li>
                <a href="http://scalatra.org/2.1/api">2.1</a>
              </li>
              <li>
                <a href="http://scalatra.org/2.0/api">2.0</a>
              </li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">

          <div class="page-header">
  <h1>The anatomy
    <small>of a Scalatra app</small>
  </h1>
</div>


<h2>Project structure</h2>

<p>The recommended way of structuring a Scalatra project is as follows:</p>

<pre><code>project

src
|_ main
   |_ scala
   |  |   |_Scalatra.scala &lt;= see note below!
   |  |
   |  |_org
   |      |_yourdomain
   |        |
   |        |_projectname
   |          |_ ArticlesServlet.scala
   |          |_ UsersServlet.scala
   |
   |_ webapp
      |
      |_ WEB-INF
         |
         |_ views
         |  |_ default.jade
         |
         |_ layouts
         |  |_ default.jade
         |
         |_ web.xml
</code></pre>

<h2>Serving static files</h2>

<p>Static files can be served out of the <code>webapp</code> folder, which acts as the ROOT
directory. As with any servlet based application, the contents of this directory
are all public, with the exception of files in the WEB-INF directory.</p>

<p>An example structure may help in understanding this.</p>

<pre><code>src
|_ main
   |_ scala
   |  |_ Web.scala
   |_ webapp
      |_ WEB-INF
      |  |_ secret.txt
      |  |_ views
      |  |  |_ default.jade
      |  |
      |  |_ layouts
      |  |  |_ default.jade
      |  |
      |  |_ web.xml
      |- stylesheets
      |    |_ default.css
      |- images
           |_ foo.jpg
</code></pre>

<p>In this application, the only publicly accessible files will be at
<code>stylesheets/default.css</code> and <code>images/foo.jpg</code>. Everything else will be
protected by the web application container.</p>

<h2>ScalatraServlet vs. ScalatraFilter</h2>

<p>There are two base classes you can inherit from in order to make a
Scalatra application: <code>ScalatraServlet</code> and <code>ScalatraFilter</code>.</p>

<div class="highlight"><pre><code class="scala">  <span class="k">class</span> <span class="nc">YourServlet</span> <span class="k">extends</span> <span class="nc">ScalatraServlet</span> <span class="k">with</span> <span class="nc">ScalateSupport</span> <span class="o">{</span>
    <span class="c1">// your class here</span>
  <span class="o">}</span>
</code></pre>
</div>


<p>vs.</p>

<div class="highlight"><pre><code class="scala">  <span class="k">class</span> <span class="nc">YourFilter</span> <span class="k">extends</span> <span class="nc">ScalatraFilter</span> <span class="k">with</span> <span class="nc">ScalateSupport</span> <span class="o">{</span>
    <span class="c1">// your class here</span>
  <span class="o">}</span>
</code></pre>
</div>


<p>The main difference is the default behavior when a route is not found.
A <code>ScalatraFilter</code> will delegate to the next filter or servlet in the chain (as
configured by web.xml), whereas a <code>ScalatraServlet</code> will return a 404
response.</p>

<p>Another difference is that <code>ScalatraFilter</code> matches routes relative to
the WAR's context path. <code>ScalatraServlet</code> matches routes relative to the
servlet path. This allows you to mount multiple servlets in different namespaces
in the same WAR.</p>

<h3>Use ScalatraFilter if:</h3>

<ul>
<li>You are migrating a legacy application inside the same URL space</li>
<li>You want to serve static content from the WAR rather than a
dedicated web server</li>
</ul>


<h3>Use ScalatraServlet if:</h3>

<ul>
<li>You want to match routes with a prefix deeper than the context path.</li>
</ul>


<h2>Scalatra's SBT dependencies</h2>

<p>Scalatra uses Scala's <a href="http://www.scala-sbt.org/">Simple Build Tool</a>, or <code>sbt</code>, as a build system.</p>

<p>The <code>build.sbt</code> file defines the libraries which your application will depend on,
so that <code>sbt</code> can download them for you and build your Scalatra project.</p>

<p>Here's an example Scalatra sbt file:</p>

<div class="highlight"><pre><code class="scala">    <span class="n">organization</span> <span class="o">:=</span> <span class="s">&quot;org.example&quot;</span>

    <span class="n">name</span> <span class="o">:=</span> <span class="s">&quot;yourapp&quot;</span>

    <span class="n">version</span> <span class="o">:=</span> <span class="s">&quot;0.1.0-SNAPSHOT&quot;</span>

    <span class="n">scalaVersion</span> <span class="o">:=</span> <span class="s">&quot;2.9.1&quot;</span>

    <span class="n">seq</span><span class="o">(</span><span class="n">webSettings</span> <span class="k">:_</span><span class="kt">*</span><span class="o">)</span>

    <span class="n">classpathTypes</span> <span class="o">~=</span> <span class="o">(</span><span class="k">_</span> <span class="o">+</span> <span class="s">&quot;orbit&quot;</span><span class="o">)</span>

    <span class="n">libraryDependencies</span> <span class="o">++=</span> <span class="nc">Seq</span><span class="o">(</span>
      <span class="s">&quot;org.scalatra&quot;</span> <span class="o">%</span> <span class="s">&quot;scalatra&quot;</span> <span class="o">%</span> <span class="s">&quot;2.1.0&quot;</span><span class="o">,</span>
      <span class="s">&quot;org.scalatra&quot;</span> <span class="o">%</span> <span class="s">&quot;scalatra-scalate&quot;</span> <span class="o">%</span> <span class="s">&quot;2.1.0&quot;</span><span class="o">,</span>
      <span class="s">&quot;org.scalatra&quot;</span> <span class="o">%</span> <span class="s">&quot;scalatra-specs2&quot;</span> <span class="o">%</span> <span class="s">&quot;2.1.0&quot;</span> <span class="o">%</span> <span class="s">&quot;test&quot;</span><span class="o">,</span>
      <span class="s">&quot;ch.qos.logback&quot;</span> <span class="o">%</span> <span class="s">&quot;logback-classic&quot;</span> <span class="o">%</span> <span class="s">&quot;1.0.6&quot;</span> <span class="o">%</span> <span class="s">&quot;runtime&quot;</span><span class="o">,</span>
      <span class="s">&quot;org.eclipse.jetty&quot;</span>        <span class="o">%</span> <span class="s">&quot;jetty-webapp&quot;</span>           <span class="o">%</span> <span class="s">&quot;8.1.5.v20120716&quot;</span>     <span class="o">%</span> <span class="s">&quot;container&quot;</span><span class="o">,</span>
      <span class="s">&quot;org.eclipse.jetty&quot;</span>        <span class="o">%</span> <span class="s">&quot;test-jetty-servlet&quot;</span>     <span class="o">%</span> <span class="s">&quot;8.1.5.v20120716&quot;</span>     <span class="o">%</span> <span class="s">&quot;test&quot;</span><span class="o">,</span>
      <span class="s">&quot;org.eclipse.jetty.orbit&quot;</span>  <span class="o">%</span> <span class="s">&quot;javax.servlet&quot;</span>          <span class="o">%</span> <span class="s">&quot;3.0.0.v201112011016&quot;</span> <span class="o">%</span> <span class="s">&quot;container;provided;test&quot;</span> <span class="n">artifacts</span> <span class="o">(</span><span class="nc">Artifact</span><span class="o">(</span><span class="s">&quot;javax.servlet&quot;</span><span class="o">,</span> <span class="s">&quot;jar&quot;</span><span class="o">,</span> <span class="s">&quot;jar&quot;</span><span class="o">))</span>

    <span class="o">)</span>

    <span class="n">resolvers</span> <span class="o">+=</span> <span class="s">&quot;Sonatype OSS Snapshots&quot;</span> <span class="n">at</span> <span class="s">&quot;http://oss.sonatype.org/content/repositories/snapshots/&quot;</span>
</code></pre>
</div>




<div class="alert alert-info">
<span class="badge badge-info"><i class="icon-flag icon-white"></i></span>
If your project depends on any additional libraries, you can add them to the
<code>libraryDependencies</code> section. Doing that and running <code>sbt</code>
again will download the dependency jar libraries and make them available to
your application. If you don't know what the dependency details are, you can
find out on <a href="http://search.maven.org">http://search.maven.org</a>.
</div>


<p>The default dependencies are:</p>

<dl class="dl-horizontal">
  <dt>scalatra</dt>
  <dd>This is the core Scalatra module, and is required to run the framework.</dd>
  <dt>scalatra-scalate</dt>
  <dd>This integrates with <a href="http://scalate.fusesource.org">Scalate</a>,
  a template engine supporting multiple template formats. Scalate is optional, but
  highly recommended for any app requiring templating.</dd>
  <dt>scalatra-specs2</dt>
  <dd>This integrates the <a href="https://github.com/etorreborre/specs2">Specs2</a>
      testing libraries.</dd>
  <dt>logback-classic</dt>
  <dd>Basic logging functionality, courtesy of <a href="http://logback.qos.ch/">Logback</a>.</dd>
  <dt>jetty-webapp</dt>
  <dd>This is the embedded servlet container used by the web plugin. Your application should be portable to any servlet container supporting at least the 2.5 specification.</dd>
  <dt>servlet-api</dt>
  <dd>Required for building your app.  It is placed in the `provided`
  configuration so that it is not bundled with your application.  Your servlet
  container will provide this at deployment time.</dd>
</dl>



      </div> <!-- /container -->

  <!-- Le javascript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="/scalatra-website/_site/assets/js/jquery.min.js"></script>
  <script src="/scalatra-website/_site/assets/js/bootstrap.min.js"></script>
</body>

</html>