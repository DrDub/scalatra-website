<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Scalatra guides | Views</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">

<!-- Le styles -->
<link href="/scalatra-website/_site/assets/css/bootstrap.css" rel="stylesheet">
<link href="/scalatra-website/_site/assets/css/scalatra.css" rel="stylesheet">
<style>
  body {
    padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
  }
</style>
<link href="/scalatra-website/_site/assets/css/bootstrap-responsive.css" rel="stylesheet">

<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!-- Le fav and touch icons -->
<link rel="shortcut icon" href="/scalatra-website/_site/assets/ico/favicon.ico">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/scalatra-website/_site/assets/ico/apple-touch-icon-144-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/scalatra-website/_site/assets/ico/apple-touch-icon-114-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/scalatra-website/_site/assets/ico/apple-touch-icon-72-precomposed.png">
<link rel="apple-touch-icon-precomposed" href="/scalatra-website/_site/assets/ico/apple-touch-icon-57-precomposed.png">
  </head>

      <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/scalatra-website/_site/">Scalatra</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li><a href="/scalatra-website/_site/getting-started">Getting started</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Guides
                <b class="caret"></b>
                </a>
                <ul class="dropdown-menu">
                  <li><a href="/scalatra-website/_site/guides">Overview</a></li>
                  <li><a href="/scalatra-website/_site/guides/routes-and-actions.html">Routes &amp; Actions</a></li>
                  <li><a href="/scalatra-website/_site/guides/views.html">Views</a></li>
                  <li><a href="/scalatra-website/_site/guides/helpers.html">Helpers</a></li>
                  <li><a href="/scalatra-website/_site/guides/models.html">Models</a></li>
                  <li><a href="/scalatra-website/_site/guides/testing.html">Testing</a></li>
                  <li><a href="/scalatra-website/_site/guides/configuration-deployment.html">Configuration &amp; Deployment</a></li>
                </ul>
              </li>
              <li><a href="/scalatra-website/_site/news">News</a></li>
              <li><a href="/scalatra-website/_site/community">Community</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                API docs
                <b class="caret"></b>
                </a>
                <ul class="dropdown-menu">
              <li>
                <a href="http://scalatra.org/2.1/api">2.1</a>
              </li>
              <li>
                <a href="http://scalatra.org/2.0/api">2.0</a>
              </li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">

          <div class="page-header">
  <h1>Views</h1>
</div>


<p>Scalatra can render views in three main ways.</p>

<ol>
<li>Inline HTML</li>
<li>Using Scalate directly</li>
<li>Using ScalateSupport helpers, with a bit more "magic"</li>
</ol>


<h2>Inline HTML</h2>

<p>The simplest method of rendering a view is by using inline HTML:</p>

<div class="highlight"><pre><code class="scala">  <span class="k">def</span> <span class="n">get</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">contentType</span><span class="o">=</span><span class="s">&quot;text/html&quot;</span>

    <span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">Test</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span><span class="nc">Test</span> <span class="nc">Body</span> <span class="k">for</span> <span class="o">{</span><span class="n">uri</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">)}&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
  <span class="o">}</span>
</code></pre>
</div>


<p>Note the use of the curly braces on the <code>{uri("/")}</code> part of the inlined view.
This tells Scalatra to render Scala code.</p>

<h2>Scalate</h2>

<p>Scalatra can use the incredibly powerful templating engine,
<a href="http://scalate.fusesource.org/documentation/user-guide.html">Scalate</a>. It is designed to be a thin interface for frameworks
that want to support multiple template engines.</p>

<p>Some of Scalate's all-star features include:</p>

<ul>
<li>Custom template evaluation scopes / bindings</li>
<li>Ability to pass locals to template evaluation</li>
<li>Support for passing a block to template evaluation for "yield"</li>
<li>Backtraces with correct filenames and line numbers</li>
<li>Template file caching and reloading</li>
</ul>


<p>Scalate includes support for some of the best engines available, such as
<a href="http://scalate.fusesource.org/documentation/ssp-reference.html">SSP</a>, <a href="http://scalate.fusesource.org/documentation/scaml-reference.html">SCAML</a>, <a href="http://scalate.fusesource.org/documentation/mustache.html">Mustache</a> and <a href="http://scalate.fusesource.org/documentation/jade.html">Jade</a>.</p>

<p>All you need to get started is <code>Scalate</code>, which is included in Scalatra. Views
by default look in the <code>views</code> directory in your application root.</p>

<p>There are two ways to use Scalate. Both of them require you to extend your
servlet with <code>ScalateSupport</code>:</p>

<div class="highlight"><pre><code class="scala">  <span class="k">class</span> <span class="nc">YourServlet</span> <span class="k">extends</span> <span class="nc">ScalatraServlet</span> <span class="k">with</span> <span class="nc">ScalateSupport</span> <span class="o">{</span>
    <span class="c1">// your class here</span>
  <span class="o">}</span>
</code></pre>
</div>


<h2>Using Scalate directly</h2>

<p>Scalate can be called directly, using the
<code>templateEngine.layout("templateName")</code> method, like this:</p>

<div class="highlight"><pre><code class="scala">  <span class="n">get</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">templateEngine</span><span class="o">.</span><span class="n">layout</span><span class="o">(</span><span class="s">&quot;index.ssp&quot;</span><span class="o">)</span>
    <span class="c1">// renders webapp/index.ssp</span>
    <span class="c1">// OR look in a sub-directory</span>

    <span class="n">templateEngine</span><span class="o">.</span><span class="n">layout</span><span class="o">(</span><span class="s">&quot;/dogs/index.ssp&quot;</span><span class="o">)</span>
    <span class="c1">// would instead render webapp/dogs/index.ssp</span>
  <span class="o">}</span>
</code></pre>
</div>


<p>When using Scalate directly, Scalatra will look for your template files
in the <code>webapp</code> folder of your application (which is found under <code>src/main/</code>
in the project tree).</p>

<p>Another default convention of Scalatra is the layout, which automatically
looks for a <code>webapp/layout/default.xx</code> template file to render before loading any
other views (where <code>xx</code> is a Scalate template suffix type). If you're using
<code>SSP</code>, your <code>webapp/layout/default.ssp</code> would look something like this:</p>

<div class="highlight"><pre><code class="html">  <span class="err">&lt;</span>%@ var yield: String %&gt;
  <span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>..<span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
      <span class="err">&lt;</span>%= yield %&gt;
    <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/html&gt;</span>
</code></pre>
</div>


<h2>ScalateSupport helpers</h2>

<p>The second way of using Scalate is to use Scalatra's ScalateSupport helpers, which
are a bit more "magic" than calling Scalate directly.</p>

<p>Basic usage:</p>

<div class="highlight"><pre><code class="scala">  <span class="k">def</span> <span class="n">get</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">contentType</span><span class="o">=</span><span class="s">&quot;text/html&quot;</span>

    <span class="n">layoutTemplate</span><span class="o">(</span><span class="s">&quot;/WEB-INF/views/index.ssp&quot;</span><span class="o">)</span>
  <span class="o">}</span>
</code></pre>
</div>


<p>When using <code>layoutTemplate</code>, you <em>must</em> prefix your view paths with a relative
<code>/</code> character. So, <code>layoutTemplate("/WEB-INF/views/foo.ssp")</code> is good,
<code>layoutTemplate("WEB-INF/views/foo.ssp)</code> will fail.</p>

<p>Rendering with a different layout:</p>

<div class="highlight"><pre><code class="scala">  <span class="k">def</span> <span class="n">get</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">contentType</span><span class="o">=</span><span class="s">&quot;text/html&quot;</span>

    <span class="n">layoutTemplate</span><span class="o">(</span><span class="s">&quot;/WEB-INF/views/index.ssp&quot;</span><span class="o">,</span> <span class="s">&quot;layout&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;/WEB-INF/layouts/app.ssp&quot;</span><span class="o">)</span>
  <span class="o">}</span>
</code></pre>
</div>


<p>Each possible kind of Scalate template (mustache, scaml, jade, ssp) has a
corresponding helper which can be used to find the template file, without a
suffix, and without the <code>WEB-INF/views</code> part of the path. The above example can be
written as:</p>

<div class="highlight"><pre><code class="scala">  <span class="k">def</span> <span class="n">get</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">contentType</span><span class="o">=</span><span class="s">&quot;text/html&quot;</span>

    <span class="n">ssp</span><span class="o">(</span><span class="s">&quot;/index&quot;</span><span class="o">,</span> <span class="s">&quot;layout&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;WEB-INF/layouts/app.ssp&quot;</span><span class="o">)</span>
  <span class="o">}</span>
</code></pre>
</div>


<p>When using the scalate helper methods, it is not required to having a leading
<code>/</code>, so <code>ssp("index")</code> would work just as well as <code>ssp("/index")</code>.</p>

<h2>Passing parameters to templates</h2>

<p>Parameters may be passed to your templates using a Seq(String, Any) after the
path to the template file. The simplest example might look like this:</p>

<div class="highlight"><pre><code class="scala">  <span class="k">def</span> <span class="n">get</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">contentType</span><span class="o">=</span><span class="s">&quot;text/html&quot;</span>

    <span class="n">layoutTemplate</span><span class="o">(</span><span class="s">&quot;/WEB-INF/views/index.ssp&quot;</span><span class="o">,</span> <span class="s">&quot;foo&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;uno&quot;</span><span class="o">,</span> <span class="s">&quot;bar&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;dos&quot;</span><span class="o">)</span>
  <span class="o">}</span>
</code></pre>
</div>


<p>Putting it all together, in a scaml example (alternatively use mustache, ssp,
or jade):</p>

<div class="highlight"><pre><code class="scala">  <span class="k">def</span> <span class="n">get</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">contentType</span><span class="o">=</span><span class="s">&quot;text/html&quot;</span>

    <span class="n">scaml</span><span class="o">(</span><span class="s">&quot;/index&quot;</span><span class="o">,</span> <span class="s">&quot;layout&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;WEB-INF/layouts/app.scaml&quot;</span><span class="o">,</span> <span class="s">&quot;foo&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;uno&quot;</span><span class="o">,</span> <span class="s">&quot;bar&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;dos&quot;</span><span class="o">)</span>
  <span class="o">}</span>
</code></pre>
</div>


<h2>Layouts</h2>

<p>The <code>layout</code> key is somewhat special, as it's used by scalate to identify the
layout file, which wraps a standard layout around the output for the current
action.</p>

<p>If you want, you can set off your <code>layout</code> parameter from the others, perhaps
by doing something like this (in jade this time):</p>

<div class="highlight"><pre><code class="scala">  <span class="k">def</span> <span class="n">get</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">contentType</span><span class="o">=</span><span class="s">&quot;text/html&quot;</span>

    <span class="n">jade</span><span class="o">(</span><span class="s">&quot;/index&quot;</span><span class="o">,(</span><span class="s">&quot;layout&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;WEB-INF/layouts/app.jade&quot;</span><span class="o">),</span> <span class="s">&quot;foo&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;uno&quot;</span><span class="o">,</span> <span class="s">&quot;bar&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;dos&quot;</span><span class="o">)</span>
  <span class="o">}</span>
</code></pre>
</div>


<h3>Setting a default layout</h3>

<p>Scalatra sets a default layout at <code>WEB-INF/layouts/default.xx</code> (where xx
is one of the scalate template types). If you are using ssp, for instance, and
you put a default.ssp file in WEB-INF/layouts/default.ssp, it will
automatically be used. In this case, you can simply call <code>ssp("/index")</code> and the
response will render within the default layout.</p>

<p>To disable a layout for certain templates, Scalate accepts an empty <code>layout</code>
attribute:</p>

<div class="highlight"><pre><code class="scala">  <span class="k">def</span> <span class="n">get</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// This template will render without a layout.</span>
    <span class="n">jade</span><span class="o">(</span><span class="s">&quot;/index&quot;</span><span class="o">,</span> <span class="s">&quot;layout&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;&quot;</span><span class="o">,</span> <span class="s">&quot;foo&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;uno&quot;</span><span class="o">,</span> <span class="s">&quot;bar&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;dos&quot;</span><span class="o">)</span>
  <span class="o">}</span>
</code></pre>
</div>


<p>Your layout file itself might look something like this:</p>

<div class="highlight"><pre><code class="html">  <span class="err">&lt;</span>%@ var body: String %&gt;
  <span class="err">&lt;</span>%@ var title: String = &quot;Some Default Title&quot; %&gt;
  <span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>${title}<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;p&gt;</span>layout header goes here...<span class="nt">&lt;/p&gt;</span>

    ${unescape(body)}

    <span class="nt">&lt;p&gt;</span>layout footer goes here...<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/html&gt;</span>
</code></pre>
</div>


<p>In this layout, the template output for the current action will be inserted
at the <code>${unescape(body)}</code> directive.</p>

<h2>Rendering a 404 page using the <code>notFound</code> handler</h2>

<p>You may need to render some other page when Scalatra can't find a route.</p>

<p>Using Scalate directly:</p>

<div class="highlight"><pre><code class="scala">  <span class="k">class</span> <span class="nc">MyScalatraFilter</span> <span class="k">extends</span> <span class="nc">ScalatraFilter</span> <span class="k">with</span> <span class="nc">ScalateSupport</span> <span class="o">{</span>
    <span class="n">notFound</span> <span class="o">{</span>
      <span class="c1">// If no route matches, then try to render a Scaml template</span>
      <span class="k">val</span> <span class="n">templateBase</span> <span class="k">=</span> <span class="n">requestPath</span> <span class="k">match</span> <span class="o">{</span>
        <span class="k">case</span> <span class="n">s</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">endsWith</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">s</span> <span class="o">+</span> <span class="s">&quot;index&quot;</span>
        <span class="k">case</span> <span class="n">s</span> <span class="k">=&gt;</span> <span class="n">s</span>
      <span class="o">}</span>
      <span class="k">val</span> <span class="n">templatePath</span> <span class="k">=</span> <span class="s">&quot;/WEB-INF/scalate/templates/&quot;</span> <span class="o">+</span> <span class="n">templateBase</span> <span class="o">+</span> <span class="s">&quot;.scaml&quot;</span>
      <span class="n">servletContext</span><span class="o">.</span><span class="n">getResource</span><span class="o">(</span><span class="n">templatePath</span><span class="o">)</span> <span class="k">match</span> <span class="o">{</span>
        <span class="k">case</span> <span class="n">url</span><span class="k">:</span> <span class="kt">URL</span> <span class="o">=&gt;</span>
          <span class="n">contentType</span> <span class="k">=</span> <span class="s">&quot;text/html&quot;</span>
          <span class="n">templateEngine</span><span class="o">.</span><span class="n">layout</span><span class="o">(</span><span class="n">templatePath</span><span class="o">)</span>
        <span class="k">case</span> <span class="k">_</span> <span class="k">=&gt;</span>
          <span class="n">filterChain</span><span class="o">.</span><span class="n">doFilter</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">)</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre>
</div>


<p>Or more simply, using the Scalate helpers:</p>

<div class="highlight"><pre><code class="scala">  <span class="n">notFound</span> <span class="o">{</span>
    <span class="n">findTemplate</span><span class="o">(</span><span class="n">requestPath</span><span class="o">)</span> <span class="n">map</span> <span class="o">{</span> <span class="n">path</span> <span class="k">=&gt;</span>
      <span class="n">contentType</span> <span class="k">=</span> <span class="s">&quot;text/html&quot;</span>
      <span class="n">layoutTemplate</span><span class="o">(</span><span class="n">path</span><span class="o">)</span>
    <span class="o">}</span> <span class="n">orElse</span> <span class="n">serveStaticResource</span><span class="o">()</span> <span class="n">getOrElse</span> <span class="n">resourceNotFound</span><span class="o">()</span>
  <span class="o">}</span>
</code></pre>
</div>


<h2>Further reading</h2>

<p>For more information on Scalate, please refer to the <a href="http://scalate.fusesource.org/documentation/user-guide.html">Scalate User's guide</a>.
It has advice about layouts, partials, how to DRY up layout code, making Scalate
work with your IDE or text editor, and an extensive set of examples.</p>


      </div> <!-- /container -->

  <!-- Le javascript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="/scalatra-website/_site/assets/js/jquery.min.js"></script>
  <script src="/scalatra-website/_site/assets/js/bootstrap.min.js"></script>
</body>

</html>