<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Scalatra Guides | Views</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/assets/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link href="/assets/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
  </head>

  <body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/">Scalatra</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li><a href="/getting-started">Getting started</a></li>
              <li><a href="/guides">Guides</a></li>
              <li><a href="/news">News</a></li>
              <li><a href="/community">Community</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">

      <h1>Views</h1>

<p>Scalatra can render views in three main ways.</p>

<ol>
<li>Inline HTML</li>
<li>Using Scalate directly</li>
<li>Using ScalateSupport helpers, with a bit more "magic"</li>
</ol>


<h3>Inline HTML</h3>

<p>The simplest method of rendering a view is by using inline HTML:
{pygmentize:: scala}
def get("/") {
  contentType="text/html"</p>

<p>  <html>
  <head><title>Test</title></head>
  <body>Test Body for {uri("/")}</body>
  </html>
}
{pygmentize}</p>

<p>Note the use of the curly braces on the <code>{uri("/")}</code> part of the inlined view.
This tells Scalatra to render Scala code.</p>

<h3>Scalate</h3>

<p>Scalatra can use the incredibly powerful templating engine,
<a href="http://scalate.fusesource.org/documentation/user-guide.html">Scalate</a>. It is designed to be a thin interface for frameworks
that want to support multiple template engines.</p>

<p>Some of Scalate's all-star features include:</p>

<ul>
<li>Custom template evaluation scopes / bindings</li>
<li>Ability to pass locals to template evaluation</li>
<li>Support for passing a block to template evaluation for "yield"</li>
<li>Backtraces with correct filenames and line numbers</li>
<li>Template file caching and reloading</li>
</ul>


<p>Scalate includes support for some of the best engines available, such as
<a href="http://scalate.fusesource.org/documentation/ssp-reference.html">SSP</a>, <a href="http://scalate.fusesource.org/documentation/scaml-reference.html">SCAML</a>, <a href="http://scalate.fusesource.org/documentation/mustache.html">Mustache</a> and <a href="http://scalate.fusesource.org/documentation/jade.html">Jade</a>.</p>

<p>All you need to get started is <code>Scalate</code>, which is included in Scalatra. Views
by default look in the <code>views</code> directory in your application root.</p>

<p>There are two ways to use Scalate. Both of them require you to extend your
servlet with <code>ScalateSupport</code>:
{pygmentize:: scala}
class YourServlet extends ScalatraServlet with ScalateSupport {
  // your class here
}
{pygmentize}</p>

<h3>Using Scalate directly</h3>

<p>Scalate can be called directly, using the
<code>templateEngine.layout("templateName")</code> method, like this:</p>

<p>{pygmentize:: scala}
get("/") {
  templateEngine.layout("index.ssp")
  // renders webapp/index.ssp
  // OR look in a sub-directory</p>

<p>  templateEngine.layout("/dogs/index.ssp")
  // would instead render webapp/dogs/index.ssp
}
{pygmentize}</p>

<p>When using Scalate directly, Scalatra will look for your template files
in the <code>webapp</code> folder of your application (which is found under <code>src/main/</code>
in the project tree).</p>

<p>Another default convention of Scalatra is the layout, which automatically
looks for a <code>webapp/layout/default.xx</code> template file to render before loading any
other views (where <code>xx</code> is a Scalate template suffix type). If you're using
<code>SSP</code>, your <code>webapp/layout/default.ssp</code> would look something like this:</p>

<p>{pygmentize:: html}
&lt;%@ var yield: String %>
<html>
  <head>..</head>
  <body></p>

<pre><code>&lt;%= yield %&gt;
</code></pre>

<p>  </body>
</html>
{pygmentize}</p>

<h3>ScalateSupport helpers</h3>

<p>The second way of using Scalate is to use Scalatra's ScalateSupport helpers, which
are a bit more "magic" than calling Scalate directly.</p>

<p>Basic usage:
{pygmentize:: scala}
def get("/") {
  contentType="text/html"</p>

<p>  layoutTemplate("/WEB-INF/views/index.ssp")
}
{pygmentize}</p>

<p>When using <code>layoutTemplate</code>, you <em>must</em> prefix your view paths with a relative
<code>/</code> character. So, <code>layoutTemplate("/WEB-INF/views/foo.ssp")</code> is good,
<code>layoutTemplate("WEB-INF/views/foo.ssp)</code> will fail.</p>

<p>Rendering with a different layout:
{pygmentize:: scala}
def get("/") {
  contentType="text/html"</p>

<p>  layoutTemplate("/WEB-INF/views/index.ssp", "layout" -> "/WEB-INF/layouts/app.ssp")
}
{pygmentize}</p>

<p>Each possible kind of Scalate template (mustache, scaml, jade, ssp) has a
corresponding helper which can be used to find the template file, without a
suffix, and without the <code>WEB-INF/views</code> part of the path. The above example can be
written as:</p>

<p>{pygmentize:: scala}
def get("/") {
  contentType="text/html"</p>

<p>  ssp("/index", "layout" -> "WEB-INF/layouts/app.ssp")
}
{pygmentize}</p>

<p>When using the scalate helper methods, it is not required to having a leading
<code>/</code>, so <code>ssp("index")</code> would work just as well as <code>ssp("/index")</code>.</p>

<h3>Passing parameters to templates</h3>

<p>Parameters may be passed to your templates using a Seq(String, Any) after the
path to the template file. The simplest example might look like this:</p>

<p>{pygmentize:: scala}
def get("/") {
  contentType="text/html"</p>

<p>  layoutTemplate("/WEB-INF/views/index.ssp", "foo" -> "uno", "bar" -> "dos")
}
{pygmentize}</p>

<p>Putting it all together, in a scaml example (alternatively use mustache, ssp,
or jade):
{pygmentize:: scala}
def get("/") {
  contentType="text/html"</p>

<p>  scaml("/index", "layout" -> "WEB-INF/layouts/app.scaml", "foo" -> "uno", "bar" -> "dos")
}
{pygmentize}</p>

<h3>Layouts</h3>

<p>The <code>layout</code> key is somewhat special, as it's used by scalate to identify the
layout file, which wraps a standard layout around the output for the current
action.</p>

<p>If you want, you can set off your <code>layout</code> parameter from the others, perhaps
by doing something like this (in jade this time):</p>

<p>{pygmentize:: scala}
def get("/") {
  contentType="text/html"</p>

<p>  jade("/index",("layout" -> "WEB-INF/layouts/app.jade"), "foo" -> "uno", "bar" -> "dos")
}
{pygmentize}</p>

<h4>Default layouts</h4>

<p>Scalatra sets a default layout at <code>WEB-INF/layouts/default.xx</code> (where xx
is one of the scalate template types). If you are using ssp, for instance, and
you put a default.ssp file in WEB-INF/layouts/default.ssp, it will
automatically be used. In this case, you can simply call <code>ssp("/index")</code> and the
response will render within the default layout.</p>

<p>To disable a layout for certain templates, Scalate accepts an empty <code>layout</code>
attribute:</p>

<p>{pygmentize:: scala}
def get("/") {
  // This template will render without a layout.
  jade("/index", "layout" -> "", "foo" -> "uno", "bar" -> "dos")
}
{pygmentize}</p>

<p>Your layout file itself might look something like this:</p>

<p>{pygmentize:: html}
&lt;%@ var body: String %>
&lt;%@ var title: String = "Some Default Title" %>
<html>
<head>
  <title>${title}</title>
</head>
<body>
  <p>layout header goes here...</p></p>

<p>  ${unescape(body)}</p>

<p>  <p>layout footer goes here...</p>
</body>
</html>
{pygmentize}</p>

<p>In this layout, the template output for the current action will be inserted
at the <code>${unescape(body)}</code> directive.</p>

<h3>Rendering a 404 page using the <code>notFound</code> handler</h3>

<p>You may need to render some other page when Scalatra can't find a route.</p>

<p>Using Scalate directly:</p>

<p>{pygmentize:: scala}
class MyScalatraFilter extends ScalatraFilter with ScalateSupport {
  notFound {</p>

<pre><code>// If no route matches, then try to render a Scaml template
val templateBase = requestPath match {
  case s if s.endsWith("/") =&gt; s + "index"
  case s =&gt; s
}
val templatePath = "/WEB-INF/scalate/templates/" + templateBase + ".scaml"
servletContext.getResource(templatePath) match {
  case url: URL =&gt;
    contentType = "text/html"
    templateEngine.layout(templatePath)
  case _ =&gt;
    filterChain.doFilter(request, response)
}
</code></pre>

<p>  }
}
{pygmentize}</p>

<p>Or more simply, using the Scalate helpers:</p>

<p>{pygmentize:: scala}
notFound {
  findTemplate(requestPath) map { path =></p>

<pre><code>contentType = "text/html"
layoutTemplate(path)
</code></pre>

<p>  } orElse serveStaticResource() getOrElse resourceNotFound()
}
{pygmentize}</p>

<h3>Further reading</h3>

<p>For more information on Scalate, please refer to the <a href="http://scalate.fusesource.org/documentation/user-guide.html">Scalate User's guide</a>.
It has advice about layouts, partials, how to DRY up layout code, making Scalate
work with your IDE or text editor, and an extensive set of examples.</p>


    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/assets/js/jquery.min.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>
  </body>
</html>